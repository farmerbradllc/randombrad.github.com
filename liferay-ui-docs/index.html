<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
<link rel="stylesheet" href="css/master.css" />
<STYLE type="text/css">
   .toc li {list-style-type: none }
   dd {padding: 8px 16px}
 </STYLE>
<noscript>
<link rel="stylesheet" href="css/mobile.min.css" />
</noscript>
<script>
// Edit to suit your needs.
var ADAPT_CONFIG = {
  // Where is your CSS?
  path: 'css/',

  // false = Only run once, when page first loads.
  // true = Change on window resize and page tilt.
  dynamic: true,

  // First range entry is the minimum.
  // Last range entry is the maximum.
  // Separate ranges by "to" keyword.
  range: [
    '0px    to 760px  = mobile.min.css',
    '760px  to 980px  = 720.min.css',
    '980px  to 1280px = 960.min.css',
    '1280px to 1600px = 1200.min.css',
    '1600px to 1940px = 1560.min.css',
    '1940px to 2540px = 1920.min.css',
    '2540px           = 2520.min.css'
  ]
};
</script>
<script src="js/adapt.min.js"></script>
</head>
<body>
<div class="container_12">
<div class="grid_3 toc">
<h3>Table of Contents</h3>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#creating-liferay-themes">Creating Liferay Themes</a><ul>
<li><a href="#introduction-1">Introduction</a></li>
<li><a href="#creating-a-theme">Creating a Theme</a><ul>
<li><a href="#setting-a-base-theme">Setting a base Theme</a></li>
<li><a href="#deploying-the-theme">Deploying the Theme</a></li>
</ul></li>
<li><a href="#anatomy-of-a-theme">Anatomy of a Theme</a></li>
<li><a href="#thumbnails">Thumbnails</a></li>
<li><a href="#javascript">JavaScript</a></li>
<li><a href="#settings">Settings</a></li>
<li><a href="#color-schemes">Color Schemes</a></li>
<li><a href="#portal-predefined-settings">Portal Predefined Settings</a></li>
<li><a href="#theme-inheritance">Theme inheritance</a></li>
</ul></li>
</ul>
</div> <!-- Grid 3 -->
<div class="grid_9 content">
<h1 id="introduction"><a href="#TOC">Introduction</a></h1>
<p>The purpose of this guide is to help Liferay front-end developers to code with similar methods and practices. This guide can be used for quick reference to learn the Liferay way.</p>
<h1 id="creating-liferay-themes"><a href="#TOC">Creating Liferay Themes</a></h1>
<p>Themes are hot deployable plugins which can completely transform the look and feel of the portal. Theme creators can make themes to provide an interface that is unique to the site that the portal will serve. Themes make it possible to change the user interface so completely that it would be difficult or impossible to tell that the site is running on Liferay. Liferay provides a well organized, modular structure to its themes. This allows the theme developer to be able to quickly modify everything from the border around a portlet window to every object on the page, because all of the objects are easy to find. Additionally, theme developers do not have to customize every aspect of their themes. A theme can inherit the styling, images, and templates from any of the built in themes, overriding them only where necessary. This allows themes to be smaller and less cluttered with extraneous data that already exists in the default theme (such as graphics for emoticons for the message boards portlet).</p>
<h2 id="introduction-1"><a href="#TOC">Introduction</a></h2>
<p>Liferay's themes are designed in such way that they can be very easy to create. You can start by making changes in CSS files and as your customization requirements grow you can also make changes to the HTML that controls the page design.</p>
<p>Some of the technologies that you may need to know in order to make the best use of themes are:</p>
<ul>
<li><p><strong>CSS:</strong> If desired you can create a whole new theme just by changing a CSS file.</p></li>
<li><p><strong>Velocity:</strong> a simple yet powerful tool to create templates. You will need to use it in order to customize the HTML generated by the theme.</p></li>
<li><p><strong>JavaScript:</strong> can be used to add special behaviors.</p></li>
<li><p><strong>XML:</strong> each theme has a configuration file written in XML. You will use this file to specify some settings of the theme.</p></li>
</ul>
<p>To follow the examples of this guide you will also need some familiarity with using the command line. Alternatively you can use the Liferay IDE and use its menus instead of the commands used in the text.</p>
<h2 id="creating-a-theme"><a href="#TOC">Creating a Theme</a></h2>
<p>The process for creating a new theme is nearly identical to the one for making a portlet. You will need both a project name (without spaces) and a display name (which can have spaces). For example, the project name could be <em>deep-blue</em>, and the theme title <em>Deep Blue</em>. In the terminal, navigate to the <em>themes</em> directory in the Plugins SDK and enter the following command (Linux and Mac OS X):</p>
<pre><code>./create.sh deep-blue &quot;Deep Blue&quot;</code></pre>
<p>On Windows enter the following instead:</p>
<pre><code>create.bat deep-blue &quot;Deep Blue&quot;</code></pre>
<p>This command will create a blank theme in your <em>themes</em> folder. Notice that the Plugins SDK automatically appends &quot;-theme&quot; to the project name when creating this folder.</p>
<h3 id="setting-a-base-theme"><a href="#TOC">Setting a base Theme</a></h3>
<p>All themes in Liferay are built on top of the <em>_unstyled</em> and <em>_styled</em> themes, which contain very limited styling. By default, when you create a theme, it will be build with only these as a base, however, you can set an existing theme as your base theme, so that you can gain the additional styling from that theme as well as the elements for <em>_styled</em> and <em>_unstyled</em>.</p>
<p>When a theme is built, the base themes are added in layers - first <em>_unstyled</em> is added, giving you the core of the theme, and <em>_styled</em> is added on top of that, adding the most basic elements. If you use a different base theme, that will be added on top of <em>_styled</em> - overriding the default styling wherever applicable. After the base themes are added, your own custom styling is added on top of that.</p>
<p>If you want to use a different base theme than the default, you can edit the <code>build.xml</code> file and change <em>_styled</em> in <code>&lt;property name=&quot;theme.parent&quot; value=&quot;_styled&gt;</code> to the name of any theme currently available in your environment that you wish to use.</p>
<h3 id="deploying-the-theme"><a href="#TOC">Deploying the Theme</a></h3>
<p>Open a terminal window in your <code>themes/deep-blue-theme</code> directory and enter this command:</p>
<pre><code>ant deploy</code></pre>
<p>You should get a BUILD SUCCESSFUL message, which means that your theme is now being deployed. If you switch to the terminal window running Liferay, and wait for a few seconds, you should see the message <em>1 theme for deep-blue-theme is available for use</em>.</p>
<p>Go to your web browser and login to the portal as explained earlier. Then hover over <strong>Manage</strong> at the top of the page, and click on <em>Page</em>. Directly underneath the words <strong>Manage Pages</strong> select the <em>Look and Feel</em> tab. Simply click on your theme to activate it.</p>
<h2 id="anatomy-of-a-theme"><a href="#TOC">Anatomy of a Theme</a></h2>
<p>Custom themes are based on differences from one of several built-in Liferay themes.</p>
<p>The structure of a theme is designed to separate different types of resources into easily accessible folders. The full structure of the deep blue theme is shown below:</p>
<ul>
<li>deep-blue-theme/
<ul>
<li>docroot/
<ul>
<li>WEB-INF/
<ul>
<li>liferay-plugin-package.properties</li>
</ul></li>
<li>_diffs/ (subfolders not created by default)
<ul>
<li>css/</li>
<li>images/</li>
<li>js/</li>
<li>templates/</li>
</ul></li>
<li>css/
<ul>
<li>application.css</li>
<li>base.css</li>
<li>custom.css</li>
<li>dockbar.css</li>
<li>extras.css</li>
<li>forms.css</li>
<li>layout.css</li>
<li>main.css</li>
<li>navigation.css</li>
<li>portlet.css</li>
</ul></li>
<li>images/
<ul>
<li>(many directories)</li>
</ul></li>
<li>js/
<ul>
<li>main.js</li>
</ul></li>
<li>templates/
<ul>
<li>init_custom.vm</li>
<li>navigation.vm</li>
<li>portal_normal.vm</li>
<li>portal_pop_up.vm</li>
<li>portlet.vm</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
<p>You will notice that there is a <code>_diffs</code> folder inside the <code>docroot</code> directory of your theme; this is where you will place your theme code. You only need to customize the parts of your theme that will differ from the parent theme. To do this, you mirror the directory structure of the parent theme inside of the <code>_diffs</code> folder, placing only the folders and files you need to customize there.</p>
<p>You will also notice that there are several other folders inside <code>docroot</code>; these were copied over from the parent theme in your Liferay bundle when you deployed your theme. You should use these files as the basis for your modifications. For example, to customize the navigation, you would copy <code>navigation.vm</code> from <code>deep-blue-theme/docroot/templates/navigation.vm</code> into <code>deep-blue-theme/docroot/_diffs/templates</code> folder (you may have to create this folder first). You can then open this file and customize it to your liking.</p>
<p>For custom styles, create a folder named <code>css</code> inside your <code>_diffs</code> folder and place a single file there called <code>custom.css</code>. This is where you would put all of your new styles and all of your overrides of the styles in the parent theme. <code>Custom.css</code> is loaded last, and so styles in this file are able to override any styles in the parent theme.</p>
<p>Best practice recommends that you make all your custom themes using only the <code>custom.css</code> file, and that you not override any of the templates unless absolutely necessary. This will make future upgrades far easier, as you won't have to manually modify your templates to add support for new Liferay features.</p>
<p>Whenever you make modifications to your theme, redeploy it by opening a terminal in <code>themes/deep-blue-theme</code> and entering the command <strong>ant deploy</strong>. Wait a few seconds until the theme deploys, and then refresh your browser to see your changes.</p>
<table>
<tbody>
<tr class="odd">
<td style="text-align: left;"><img src="../../images/tip-pen-paper.png" alt="tip"><strong>Tip:</strong> If you wish to see changes even more quickly, it is also possible to modify your theme directly in your Liferay bundle. In our example, <code>custom.css</code> is located in <code>liferay-portal-[version]/tomcat-[tomcat-version]/webapps/deep-blue-theme/css</code>. However, for modifications made here to appear in your browser as soon as you refresh the page, you must enable Liferay Developer Mode. See the Liferay wiki for more information.</td>
</tr>
</tbody>
</table>
<p>Also make sure that you copy any changes you make back into your <em>_diffs</em> folder, or they will be overwritten when you redeploy your theme.</p>
<h2 id="thumbnails"><a href="#TOC">Thumbnails</a></h2>
<p>You will notice that in the <em>Look and Feel</em> settings the <em>Classic</em> theme has a thumbnail preview of what it looks like, while our theme has only a broken image. To correct this, take a screenshot of your theme and save it in <code>_diffs/images</code> with the name <code>thumbnail.png</code>. It must have the exact size of 150 pixels wide by 120 pixels high. You should also save a larger version in the same directory with the name <code>screenshot.png</code>. Its size must be exactly 1080 pixels wide by 864 pixels high. After redeploying your theme, it will have a thumbnail preview just like the <em>Classic</em> theme.</p>
<h2 id="javascript"><a href="#TOC">JavaScript</a></h2>
<p>Liferay now includes its own JavaScript library called Alloy, which is an extension to Yahoo's YUI3 framework. Developers can take advantage of the full power of either of these frameworks in their themes. Inside of the <code>main.js</code> file, you will find definitions for three JavaScript callbacks:</p>
<pre><code>AUI().ready(
    function() {

    }
);

Liferay.Portlet.ready(

    /*
    This function gets loaded after each and every portlet on the page.
    */

    portletId: the current portlet&#39;s id
    node: the Alloy Node object of the current portlet

    function(portletId, node) {

    }
);

Liferay.on(
    &#39;allPortletsReady&#39;,
    /*
    This function gets loaded when everything, including the portlets, is on the
    page.
    */

    function() {
    }
);</code></pre>
<ul>
<li><strong>AUI().ready(fn);</strong></li>
</ul>
<p>This callback is executed as soon as the HTML in the page has finished loading (minus any portlets loaded via AJAX).</p>
<ul>
<li><strong>Liferay.Portlet.ready(fn);</strong></li>
</ul>
<p>Executed after each portlet on the page has loaded. The callback receives two parameters: <code>portletId</code> and <code>node. portletId</code> is the ID of the portlet that was just loaded. <code>node</code> is the Alloy Node object of the same portlet.</p>
<ul>
<li><strong>Liferay.on('allPortletsReady', fn);</strong></li>
</ul>
<p>Executed after everything—including AJAX portlets—has finished loading.</p>
<h2 id="settings"><a href="#TOC">Settings</a></h2>
<p>Each theme can define settings to make it configurable. These settings are defined in a file named <code>liferay-look-and-feel.xml</code> inside <code>WEB-INF</code>. This file does not exist by default, so you should now create it with the following content:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;!DOCTYPE look-and-feel PUBLIC &quot;-//Liferay//DTD Look and Feel 6.0.0//EN&quot;
&quot;http://www.liferay.com/dtd/liferay-look-and-feel_6_0_0.dtd&quot;&gt;

&lt;look-and-feel&gt;
    &lt;compatibility&gt;
        &lt;version&gt;6.0.0+&lt;/version&gt;
    &lt;/compatibility&gt;
    &lt;theme id=&quot;deep-blue&quot; name=&quot;Deep Blue&quot;&gt;
        &lt;settings&gt;
            &lt;setting key=&quot;my-setting&quot; value=&quot;my-value&quot; /&gt;
        &lt;/settings&gt;
    &lt;/theme&gt;
&lt;/look-and-feel&gt;</code></pre>
<p>You can define additional settings by adding more <code>&lt;setting&gt;</code> elements. These settings can be accessed in the theme templates using the following code:</p>
<pre><code>$theme.getSetting(&quot;my-setting&quot;)</code></pre>
<p>For example, say we need to create two themes that are exactly the same except for some changes in the header. One of the themes has more details while the other is smaller (and takes less screen real estate). Instead of creating two different themes, we are going to create only one and use a setting to choose which header we want.</p>
<p>In the <code>portal_normal.vm</code> template we could write:</p>
<pre><code>#if ($theme.getSetting(&quot;header-type&quot;) == &quot;detailed&quot;)
    #parse (&quot;$full_templates_path/header_detailed.vm&quot;)
#else
    #parse (&quot;$full_templates_path/header_brief.vm&quot;)
#end</code></pre>
<p>Then when we write the <code>liferay-look-and-feel.xml</code>, we write two different entries that refer to the same theme but have a different value for the header-type setting:</p>
<pre><code>&lt;theme id=&quot;deep-blue&quot; name=&quot;Deep Blue&quot;&gt;
    &lt;settings&gt;
        &lt;setting key=&quot;header-type&quot; value=&quot;detailed&quot; /&gt;
    &lt;/settings&gt;
    &lt;/theme&gt;
        &lt;theme id=&quot;deep-blue-mini&quot; name=&quot;Deep Blue Mini&quot;&gt;
    &lt;settings&gt;
        &lt;setting key=&quot;header-type&quot; value=&quot;brief&quot; /&gt;
    &lt;/settings&gt;
&lt;/theme&gt;</code></pre>
<h2 id="color-schemes"><a href="#TOC">Color Schemes</a></h2>
<p>Color schemes are specified using a CSS class name, with which you can not only change colors, but also choose different background images, different border colors, and so on.</p>
<p>In your <code>liferay-look-and-feel.xml</code>, you can define color schemes like so:</p>
<pre><code>&lt;theme id=&quot;deep-blue&quot; name=&quot;Deep Blue&quot;&gt;
    &lt;settings&gt;
        &lt;setting key=&quot;my-setting&quot; value=&quot;my-value&quot; /&gt;
    &lt;/settings&gt;
    &lt;color-scheme id=&quot;01&quot; name=&quot;Day&quot;&gt;
        &lt;css-class&gt;day&lt;/css-class&gt;
        &lt;color-scheme-images-path&gt;${images-path}/color_schemes/${css-class}&lt;/color-scheme-images-path&gt;
    &lt;/color-scheme&gt;
    &lt;color-scheme id=&quot;02&quot; name=&quot;Night&quot;&gt;
        &lt;css-class&gt;night&lt;/css-class&gt;
    &lt;/color-scheme&gt;
&lt;/theme&gt;</code></pre>
<p>Inside of your <code>_diffs/css</code> folder, create a folder called <code>color_schemes</code>. Inside of that folder, place a <code>.css</code> file for each of your color schemes. In the case above, we would could either have just one called <code>night.css</code> and let the default styling handle the first color scheme, or you could have both <code>day.css</code> and <code>night.css</code>.</p>
<p>Assuming you follow the second route, place the following lines at the bottom of your <code>custom.css</code> file:</p>
<pre><code>@import url(color_schemes/day.css);
@import url(color_schemes/night.css);</code></pre>
<p>The color scheme CSS class is placed on the <code>&lt;body&gt;</code> element, so you can use it to identify you styling. In <code>day.css</code> you would prefix all of your CSS styles like this:</p>
<pre><code>body.day { background-color: #ddf; }
.day a { color: #66a; }</code></pre>
<p>And in <code>night.css</code> you would prefix all of your CSS styles like this:</p>
<pre><code>body.night { background-color: #447; color: #777; }
.night a { color: #bbd; }</code></pre>
<p>You can also create separate thumbnail images for each of your color schemes. The <code>&lt;color-scheme-images-path&gt;</code> element tells Liferay where to look for these images (note that you only have to place this element in one of the color schemes for it to affect both). For our example, create the folders <code>_diffs/images/color_schemes/day</code> and <code>_diffs/images/color_schemes/night</code>. In each of these folders place a <code>thumbnail.png</code> and <code>screenshot.png</code> file with the same sizes as before.</p>
<h2 id="portal-predefined-settings"><a href="#TOC">Portal Predefined Settings</a></h2>
<p>The portal defines some settings that allow the theme to determine certain behaviors. So far there are only two predefined settings but this number may grow in the future. These settings can be modified from <code>liferay-look-and-feel.xml</code>.</p>
<p>If set to <code>false</code>, the portal will turn off borders by default for all the portlets. The default is <code>true</code>.</p>
<p>Example:</p>
<pre><code>&lt;settings&gt;
    &lt;setting key=&quot;portlet-setup-show-borders-default&quot; value=&quot;false&quot; /&gt;
&lt;/settings&gt;</code></pre>
<p>This default behavior can be overridden for individual portlets using:</p>
<ul>
<li><p><code>liferay-portlet.xml</code></p></li>
<li><p>Portlet CSS popup setting</p></li>
</ul>
<p>This setting is used by the <em>Navigation</em> portlet to determine the CSS class name of the list of pages. The value must be a comma separated list of valid bullet styles to be used.</p>
<p>Example:</p>
<pre><code>&lt;settings&gt;
    &lt;setting key=&quot;bullet-style-options&quot; value=&quot;classic,modern,tablemenu&quot; /&gt;
&lt;/settings&gt;</code></pre>
<p>The bullet style can be changed by the user in the <em>Navigation</em> portlet configuration. The chosen style will be applied as a CSS class on the <code>&lt;div&gt;</code> containing the navigation. This class will be named in the following pattern:</p>
<pre><code>.nav-menu-style-{BULLET_STYLE_OPTION} {
    ... CSS selectors ...
}</code></pre>
<p>Here is an example of the HTML code that you would need to add style through CSS code. In this case the bullet style option is <strong>modern</strong>:</p>
<pre><code>&lt;div class=&quot;nav-menu nav-menu-style-modern&quot;&gt;
    &lt;ul class=&quot;breadcrumbs lfr-component&quot;&gt;
        ...
    &lt;/ul&gt;
&lt;/div&gt;</code></pre>
<p>Using CSS and/or some unobtrusive Javascript it's possible to implement any type of menu.</p>
<h2 id="theme-inheritance"><a href="#TOC">Theme inheritance</a></h2>
<p>By default themes are based on the <strong>_styled</strong> theme, which provides only basic styling of portlets. If you open the <code>build.xml</code> file in your theme's directory, you will see the following:</p>
<pre><code>&lt;project name=&quot;theme&quot; basedir=&quot;.&quot; default=&quot;deploy&quot;&gt;
    &lt;import file=&quot;../build-common-theme.xml&quot; /&gt;
    &lt;property name=&quot;theme.parent&quot; value=&quot;_styled&quot; /&gt;
&lt;/project&gt;</code></pre>
<p>The <code>theme.parent</code> property determines which built-in theme your theme will inherit from. In addition to the <strong>_styled</strong> theme, you may also choose to inherit from the <strong>_unstyled</strong> theme, which contains no styling whatsoever. This involves more work, but in exchange you get full flexibility to design your own CSS files from scratch.</p>
<p>You can also use the default Liferay theme, called <strong>classic</strong>, as the parent of your themes. Using this approach allows you to start with a look and feel that already works and get nice results quickly. The drawback is that since there is so much done already for you, there won't be as much flexibility to build the desired design. It's a compromise between creating a theme as quickly as possible versus having full control of the result. It's your choice.</p>
</div> <!-- grid 9 -->
</div> <!-- Containter 12 -->
</body>
</html>
